<div class="back-button" (click)="goBack()">
  <span class="material-symbols-sharp">arrow_back</span>
</div>
<br> <br>
<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp" rel="stylesheet">

<div class="card p-4 shadow-lg rounded-2xl bg-white">
  <div class="row justify-content-between align-items-center mb-4">
    <h2 class="text-xl font-semibold col-auto">Categories details</h2>
  </div>
  <br>
  <div class="category-container">
    <h3 class="category-title"><strong>Title:</strong>Autonomie</h3>
    <p><strong>Code:</strong> C03</p>
    <p><strong>Description:</strong>Catégorie sur l'indépendance dans les tâches quotidiennes.</p>
  </div>
</div>
<div class="container-custom">
  <!-- Main Content -->
  <div class="row">
    <div class="col-md-12">


      <!-- Communication -->
      <h3>Domaines</h3>
      <div class="container">
        <div class="card p-4 shadow-lg rounded-2xl bg-white">
          <div class="row justify-content-between align-items-center mb-4">
            <p-toolbar styleClass="mb-4">
              <ng-template pTemplate="left">
                <div class="d-flex align-items-center">
                  <button pButton [icon]="showFilters ? 'pi pi-eye-slash' : 'pi pi-filter'" (click)="toggleFilters()">
                  </button>
                </div>
              </ng-template>
              <ng-template pTemplate="right">
                <div>
                  <button pButton icon="pi pi-plus" label="Add New" class="custom-add-button"
                    (click)="showAddUserDialog()">
                  </button>
                </div>
              </ng-template>
            </p-toolbar>
          </div>
          <br>
          <p-table #dt2 class="rounded-2xl overflow-hidden shadow-md" [value]="domaines" dataKey="id" [rows]="10"
            [rowsPerPageOptions]="[10, 25, 50]" [loading]="loading" [paginator]="true" [scrollable]="true"
            [scrollHeight]="'200px'" [globalFilterFields]="['title', 'description', 'code']"
            [tableStyle]="{ 'min-width': '75rem' }">

            <ng-template pTemplate="header">
              <tr>
                <th>Code</th>
                <th>Title</th>
                <th>Description</th>
                <th>Actions</th>
              </tr>
              <tr *ngIf="showFilters" style="zoom: 80%;">
                <th>
                  <p-columnFilter type="text" field="code" placeholder="Rechercher code"
                    showFilterMenu="false"></p-columnFilter>
                </th>
                <th>
                  <p-columnFilter type="text" field="title" placeholder="Rechercher titre"
                    showFilterMenu="false"></p-columnFilter>
                </th>
                <th>
                  <p-columnFilter type="text" field="description" placeholder="Rechercher description"
                    showFilterMenu="false"></p-columnFilter>
                </th>
                <th></th>
              </tr>
            </ng-template>

            <ng-template pTemplate="body" let-domaine>
              <tr>
                <td>{{ domaine.code }}</td>
                <td>{{ domaine.title }}</td>
                <td>{{ domaine.description }}</td>
                <td>
                  <button pButton icon="pi pi-pencil" class="p-button-rounded p-button-text p-button-info"
                    (click)="editDomaine(domaine)"></button>
                  <button pButton icon="pi pi-trash" class="p-button-rounded p-button-text p-button-danger"
                    (click)="deleteDomaine(domaine)"></button>
                </td>
              </tr>
            </ng-template>

            <ng-template #emptymessage>
              <tr>
                <td colspan="4">Aucun domaine trouvé.</td>
              </tr>
            </ng-template>
          </p-table>

        </div>
        <!-- 
        <p-dialog header="Ajouter un utilisateur" [(visible)]="displayAddUserDialog" [modal]="true"
          [style]="{ width: '30vw' ,zoom:'90%'}" [dismissableMask]="true">
          <div class="p-fluid">
            <div class="p-field">
              <label for="username">Nom / Prénom</label>
              <input id="username" pInputText [(ngModel)]="newDomaine.username" />
            </div>


            <div class="p-field">
              <label for="address">Adresse</label>
              <input id="address" pInputText [(ngModel)]="newDomaine.address" />
            </div>
   
          <ng-template pTemplate="footer">
            <button pButton label="Annuler" icon="pi pi-times" class="p-button-text"
              (click)="displayAddUserDialog = false"></button>
            <button pButton label="Ajouter" icon="pi pi-check" class="p-button-success" (click)="addUser()"></button>

          </ng-template>
        </p-dialog> -->

      </div>
      <h3>Items</h3>
      @for (domaine of domaines; track $index) {
      <div class="container">
        <div class="card p-4 shadow-lg rounded-2xl bg-white">
          <div class="row justify-content-between align-items-center mb-4">
            <p-toolbar styleClass="mb-4">
              <ng-template pTemplate="left">
              
       
                <p ><strong>Domaine:</strong> {{ domaine.title}}</p> <br>
                <!-- <p><strong>Code:</strong>  {{ domaine.code}}</p><br>
                <p><strong>Description:</strong> {{ domaine.description}}.</p> -->
              </ng-template>
              <ng-template pTemplate="right">
                <div>
                  <button pButton icon="pi pi-plus" label="Add New" class="custom-add-button"
                    (click)="showAddUserDialog()">
                  </button>
                </div>
              </ng-template>
            </p-toolbar>
          </div>
          <br>
          <p-table #dt2 class="rounded-2xl overflow-hidden shadow-md" [value]="domaine.items" dataKey="id" [rows]="10"
            [rowsPerPageOptions]="[10, 25, 50]" [loading]="loading" [paginator]="true" [scrollable]="true"
            [scrollHeight]="'200px'" [globalFilterFields]="['title', 'description', 'code']"
            [tableStyle]="{ 'min-width': '75rem' }">

            <ng-template pTemplate="header">
              <tr>
                <th>Code</th>
                <th>Title</th>
                <th>Description</th>
                <th>Actions</th>
              </tr>

            </ng-template>

            <ng-template pTemplate="body" let-domaine>
              <tr>
                <td>{{ domaine.code }}</td>
                <td>{{ domaine.title }}</td>
                <td>{{ domaine.description }}</td>
                <td>
                  <button pButton icon="pi pi-pencil" class="p-button-rounded p-button-text p-button-info"
                    (click)="editDomaine(domaine)"></button>
                  <button pButton icon="pi pi-trash" class="p-button-rounded p-button-text p-button-danger"
                    (click)="deleteDomaine(domaine)"></button>
                </td>
              </tr>
            </ng-template>

            <ng-template #emptymessage>
              <tr>
                <td colspan="4">Aucun domaine trouvé.</td>
              </tr>
            </ng-template>
          </p-table>

        </div>
      </div>
      <br>
      }
    </div>

  </div>