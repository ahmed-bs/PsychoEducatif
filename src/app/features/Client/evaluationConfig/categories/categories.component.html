<link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Sharp" rel="stylesheet">

<div class="head-title">
  <div class="left">
    <h1><span class="emoji">📝</span> {{ 'categories.head_title.title' | translate }}</h1>
    <ul class="breadcrumb">
      <li><a href="#">{{ 'categories.head_title.breadcrumb.dashboard' | translate }}</a></li>
      <li><i class="bx bx-chevron-right"></i></li>
      <li><a class="active" href="#"><span class="emoji">📝</span> {{ 'categories.head_title.breadcrumb.skills_list' | translate }}</a></li>
    </ul>
  </div>
</div>

<p-toast></p-toast>

<div class="p-3">
  <div class="flex col justify-end">
    <p-toolbar>
      <!-- <ng-template pTemplate="left">
        <div class="d-flex align-items-center">
          <button
            pButton
            [icon]="showFilters ? 'pi pi-eye-slash' : 'pi pi-filter'"
            (click)="toggleFilters()"
          ></button>
        </div>
      </ng-template> -->
      <ng-template pTemplate="right">
        <button pButton icon="pi pi-plus" class="p-button-success" (click)="showAddUserDialog()">
          <span class="ml-3">{{ 'categories.toolbar.add_skill_button' | translate }}</span>
        </button>
      </ng-template>
    </p-toolbar>
  </div>
</div>

<div class="container">
  <main>
    <div class="insights">
      <!-- Display image if no categories -->
      <div *ngIf="!categories || categories.length === 0" class="no-data">
        <img src="/assets/image/nodatafound.png" [alt]="'categories.no_data.image_alt' | translate" class="no-data-image" />
        <p>{{ 'categories.no_data.message' | translate }}</p>
      </div>
      <!-- Display categories if available -->
      <ng-container *ngIf="categories && categories.length > 0">
        <div class="sales" *ngFor="let category of categories">
          <button class="btn top-right" (click)="showEditDialog(category)">✏️</button>
          <span class="material-symbols-sharp">category</span>
          <div class="middle">
            <div class="left">
              <h2>{{ category.name }}</h2>
              <h3 [innerHTML]="'categories.category_card.created_at' | translate: { date: (category.created_at | date: 'dd/MM/yyyy') }"></h3>
            </div>
          </div>
          <small class="text-muted" [innerHTML]="'categories.category_card.items_count' | translate: { count: category.items_count || 0 }"></small>
          <small class="text-muted" [innerHTML]="'categories.category_card.domains_count' | translate: { count: category.domains_count || 0 }"></small>
          <br />
          <div class="buttons">
            <button class="btn delete" (click)="deleteCategory(category)">🗑</button>
            <button class="btn edit" (click)="navigateToDomains(category)">⚙️</button>
          </div>
        </div>
      </ng-container>
    </div>
  </main>
</div>

<p-dialog [(visible)]="displayAddUserDialog" [modal]="true" [style]="{ width: '40vw' }" [draggable]="false" [resizable]="false">
  <ng-template pTemplate="header">
    <div class="custom-dialog-header">
      <h2>{{ newCategory.id ? 'categories.add_category_dialog.header_edit' : 'categories.add_category_dialog.header_add' | translate }}</h2>
    </div>
  </ng-template>
  <div class="dialog-content">
    <div class="field">
      <label for="firstName">{{ 'categories.add_category_dialog.labels.title' | translate }}</label>
      <input pInputText id="firstName" [(ngModel)]="newCategory.name" [placeholder]="'categories.add_category_dialog.placeholders.title' | translate" required />
    </div>
    <div class="field">
      <label for="lastName">{{ 'categories.add_category_dialog.labels.description' | translate }}</label>
      <input pInputText id="lastName" [(ngModel)]="newCategory.description" [placeholder]="'categories.add_category_dialog.placeholders.description' | translate" required />
    </div>
  </div>
  <ng-template pTemplate="footer">
    <p-button [label]="'categories.add_category_dialog.buttons.cancel' | translate" styleClass="p-button-text" (click)="displayAddUserDialog = false"></p-button>
    <p-button [label]="newCategory.id ? 'categories.add_category_dialog.buttons.update' : 'categories.add_category_dialog.buttons.add' | translate" styleClass="p-button-primary" (click)="newCategory.id ? updateCategory() : addCategory()" [style]="{ color: 'white' }"></p-button>
  </ng-template>
</p-dialog>