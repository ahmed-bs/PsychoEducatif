<div class="head-title">
  <div class="left">
    <h1>R√©sum√© des Comp√©tences üìä</h1>
    <ul class="breadcrumb">
      <li>
        <a href="#">Tableau de bord</a>
      </li>
      <li><i class="bx bx-chevron-right"></i></li>
      <li>
        <a class="active" href="#">R√©sum√© des comp√©tences</a>
      </li>
    </ul>
  </div>

<div class="left">

</div>
  <div class="right"></div>
</div>
<div class="summary-container">
  <div *ngIf="isLoading" class="text-center">
    <p>Loading...</p>
  </div>
  <div *ngIf="error" class="alert alert-danger">
    {{ error }}
  </div>
  <div *ngIf="items.length > 0" class="mb-4">
    <h2 class="category-header">{{ profileCategoryName }}</h2>
    <h3 class="domain-header">{{ profileDomainName }}</h3>
  </div>
  <p-table [value]="items" [paginator]="true" [rows]="10" [responsive]="true" styleClass="p-datatable-striped p-datatable-gridlines">
    <ng-template pTemplate="caption">
      <div class="button-container">
        <button pButton pRipple type="button" icon="pi pi-file-excel" label="Export Excel" class="p-button-success mr-2" (click)="exportExcel()" [disabled]="items.length === 0"></button>
        <button pButton pRipple type="button" icon="pi pi-file-pdf" label="Export PDF" class="p-button-warning mr-2" (click)="exportPdf()" [disabled]="items.length === 0"></button>
      </div>
    </ng-template>
    <ng-template pTemplate="header">
      <tr>
        <th>Items</th>
        <th>Statuts</th>
        <th>Commentaires</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-item>
      <tr>
        <td class="align-middle">{{ item.description || item.name }}</td>
        <td class="align-middle">
          <span [ngClass]="{
            'statut-badge statut-acquise': item.etat === 'ACQUIS',
            'statut-badge statut-non-acquise': item.etat === 'NON_ACQUIS',
            'statut-badge statut-non-evalue': item.etat === 'NON_COTE',
            'statut-badge statut-partiel': item.etat === 'PARTIEL'
          }">
            {{ item.etat === 'ACQUIS' ? 'Acquise' : 
               item.etat === 'NON_ACQUIS' ? 'Non acquise' : 
               item.etat === 'PARTIEL' ? 'Partielle' : 
               'Non √©valu√©' }}
          </span>
        </td>
        <td class="align-middle">
          <div *ngIf="item.commentaire && item.commentaire !== item.name" class="comment-bubble">
            {{ item.commentaire }}
          </div>
          <div *ngIf="!item.commentaire || item.commentaire === item.name" class="text-muted">
            -
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>