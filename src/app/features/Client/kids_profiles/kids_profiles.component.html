
<div class="container-custom">

    <!-- Main Content -->
    <div class="row">
        <!-- Left Column: Today's Course -->
        <div class="col-md-5">
            <div class="header-container">
                <h3 class="box-title">Suivi des Enfants</h3>
                <div class="add-child-btn">
                    <p-button label="Ajouter un enfant" icon="pi pi-plus" styleClass="p-button-primary"
                        (click)="showDialog()"></p-button>
                </div>
            </div>
            <!-- Champ de recherche -->
            <div class="search-bar">
                <span class="p-input-icon-left">
                    <i class="pi pi-search"></i>
                    <input pInputText type="text" [(ngModel)]="searchTerm" placeholder="Rechercher un enfant par nom"
                        (input)="filterChildren()" class="search-input" />
                </span>
            </div>
            <!-- Bouton Ajouter un enfant avec PrimeNG -->
            <!-- Conteneur avec scroll pour les cartes -->
            <div class="cards-container">
                <!-- Liste des cartes dynamiques -->
                <div class="course-card" *ngFor="let child of filteredChildren" (click)="selectChild(child)">
                    <div class="course-content">
                        <svg class="circle-chart" viewBox="0 0 33.83 33.83" width="80" height="80">
                            <defs>
                                <pattern id="img" patternUnits="userSpaceOnUse" height="80" width="80">
                                    <image x="5" y="5" height="70%" width="70%"
                                        xlink:href="assets/image_client/jeune-homme-souriant-aux-lunettes_1308-174373.avif">
                                    </image>
                                </pattern>
                            </defs>
                            <circle class="circle-chart__background" cx="16.915" cy="16.915" r="15.915"></circle>
                            <circle class="circle-chart__circle" stroke-dasharray="79" cx="16.915" cy="16.915"
                                r="15.915"></circle>
                        </svg>
                        <div class="course-details">
                            <a href="#" class="course-title">{{ child.name }}, {{ child.age }} ans</a>
                            <div class="course-info">
                                <p><i class="fas fa-check-circle"></i> {{ child.objectives.length || 0 }} compétences
                                    acquises</p>
                                <p><i class="fas fa-hourglass-half"></i> {{ child.objectives.length || 0 }} en cours</p>
                                <p><i class="fas fa-times-circle"></i> {{ child.objectives.length &&
                                    child.evaluationScore < 50 ? 1 : 0 }} non acquises</p>
                                        <p><i class="fas fa-bullseye"></i> {{ child.objectives.length || 0 }} objectifs
                                            actifs</p>
                            </div>
                        </div>
                    </div>
                    <div class="course-footer">
                        <h2 class="progress-percentage">{{ child.evaluationScore || 0 }}%</h2>
                        <div class="btn-group">
                            <button class="btn btn-skip" (click)="disableChild(child)">Désactiver</button>
                            <button class="btn btn-continue">Voir le Profil</button>
                        </div>
                    </div>
                </div>
                <!-- Message si la liste est vide -->
                <div class="no-children-message" *ngIf="filteredChildren.length === 0">
                    <p>Vous n'avez pas d'enfant.</p>
                </div>
            </div>
        </div>
        <!-- Right Column: Dashboard -->
        <div class="col-md-7">
            <!-- Profile Card -->
            <div class="row">
                <div class="col-md-6">
                    <div class="card profile-card mb-3" *ngIf="selectedChild">
                        <div class="profile-header" style="position: relative;">
                            <a href="#" class="edit-icon" style="position: absolute; top: 10px; right: 10px;">
                                <i class="fa fa-pencil" aria-hidden="true" style="color: #4da5d8; font-size: 20px;"></i>
                            </a>
 <!-- Icône de partage -->
<a  class="share-icon"  style="position: absolute; top: 10px; right: 50px;">
    <i class="pi pi-share-alt" style="color: #a01717; font-size: 20px;"></i>
</a>


                        </div>
                        <div class="profile-avatar">
                            <img src="assets/image_client/jeune-homme-souriant-aux-lunettes_1308-174373.avif"
                                alt="Avatar de Lucas">
                        </div>
                        <!-- <div class="profile-avatar">
                            <img [src]="selectedChild.image" alt="Avatar de {{ selectedChild.name }}">
                        </div> -->
                        <div class="profile-info">
                            <h3><a href="#" class="text-dark">{{ selectedChild.name }}, {{ selectedChild.age }} ans</a>
                            </h3>
                            <p><i class="fa fa-map-marker" aria-hidden="true"></i> {{ selectedChild.location }}</p>
                            <div class="profile-stats">
                                <div class="stat-card">
                                    <i class="fa fa-check-circle"></i>
                                    <h4>{{ selectedChild.objectives.length }}</h4>
                                    <p>Compétences acquises</p>
                                </div>
                                <div class="stat-card">
                                    <i class="fa fa-bullseye"></i>
                                    <h4>{{ selectedChild.evaluationScore }}%</h4>
                                    <p>Évaluation</p>
                                </div>
                            </div>
                        </div>

                    </div>
                </div>

                <div class="col-md-6">
                    <div class="card points-card mb-3">
                        <div class="points-info">
                            <h2>75 %</h2>
                            <h5>Progrès global</h5>
                            <div class="btn-group">
                                <button class="btn btn-skip">Exporter</button>
                                <button class="btn btn-continue">Mettre à jour</button>
                            </div>
                        </div>
                    </div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card action-card consultation-card mb-3">
                                <div class="action-header">
                                    <i class="fas fa-clipboard-check"></i>
                                    <i class="mdi mdi-arrow-top-right action-icon"></i>
                                </div>
                                <div style="margin-top: 40px;">
                                    <h4>Évaluation</h4>
                                    <p>Évaluer les compétences de Lucas</p>
                                </div>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card action-card set-target-card mb-3">
                                <div class="action-header">
                                    <i class="fas fa-bullseye"></i>
                                    <i class="mdi mdi-arrow-top-right action-icon"></i>
                                </div>
                                <div style="margin-top: 40px;">
                                    <h4>Objectifs</h4>
                                    <p>Définir ou ajuster les objectifs</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Chart Section -->
                <div class="card chart-section">
                    <div class="chart-header">
                        <h3>Suivi des Compétences</h3>
                        <div class="chart-legend">
                            <div class="legend-item">
                                <i class="fa fa-circle" style="color: #5840ba;"></i> Communication
                            </div>
                            <div class="legend-item">
                                <i class="fa fa-circle" style="color: #fb84e2;"></i> Socialisation
                            </div>
                        </div>
                        <div class="dropdown">
                            <button class="dropdown-toggle">
                                <i class="fa fa-calendar-plus-o" aria-hidden="true"></i> | 2025
                            </button>
                            <div class="dropdown-menu">
                                <a class="dropdown-item" href="#"><i class="fa fa-calendar"></i> 2024</a>
                                <a class="dropdown-item" href="#"><i class="fa fa-calendar"></i> 2023</a>
                                <a class="dropdown-item" href="#"><i class="fa fa-calendar"></i> 2022</a>
                                <div class="dropdown-divider"></div>
                                <a class="dropdown-item" href="#"><i class="fa fa-calendar"></i> 2021</a>
                            </div>
                        </div>
                    </div>
                    <div class="chart-container">
                        <svg height="300" version="1.1" width="100%" xmlns="http://www.w3.org/2000/svg"
                            xmlns:xlink="http://www.w3.org/1999/xlink">
                            <desc>Graphique de suivi des compétences de Lucas</desc>
                            <defs></defs>
                            <!-- Y-axis labels -->
                            <text x="35.86" y="261.4" text-anchor="end" font-family="sans-serif" font-size="12px"
                                stroke="none" fill="#888888">
                                <tspan dy="4.4">0</tspan>
                            </text>
                            <path fill="none" stroke="#e0e0e0" d="M48.36,261.4H620.125" stroke-width="0.5"></path>
                            <text x="35.86" y="202.3" text-anchor="end" font-family="sans-serif" font-size="12px"
                                stroke="none" fill="#888888">
                                <tspan dy="4.4">25</tspan>
                            </text>
                            <path fill="none" stroke="#e0e0e0" d="M48.36,202.3H620.125" stroke-width="0.5"></path>
                            <text x="35.86" y="143.2" text-anchor="end" font-family="sans-serif" font-size="12px"
                                stroke="none" fill="#888888">
                                <tspan dy="4.4">50</tspan>
                            </text>
                            <path fill="none" stroke="#e0e0e0" d="M48.36,143.2H620.125" stroke-width="0.5"></path>
                            <text x="35.86" y="84.1" text-anchor="end" font-family="sans-serif" font-size="12px"
                                stroke="none" fill="#888888">
                                <tspan dy="4.4">75</tspan>
                            </text>
                            <path fill="none" stroke="#e0e0e0" d="M48.36,84.1H620.125" stroke-width="0.5"></path>
                            <text x="35.86" y="25" text-anchor="end" font-family="sans-serif" font-size="12px"
                                stroke="none" fill="#888888">
                                <tspan dy="4.4">100</tspan>
                            </text>
                            <path fill="none" stroke="#e0e0e0" d="M48.36,25H620.125" stroke-width="0.5"></path>
                            <!-- X-axis labels -->
                            <text x="620.125" y="273.9" text-anchor="middle" font-family="sans-serif" font-size="12px"
                                stroke="none" fill="#888888" transform="matrix(1,0,0,1,0,6.8)">
                                <tspan dy="4.4">Mars</tspan>
                            </text>
                            <text x="524.87" y="273.9" text-anchor="middle" font-family="sans-serif" font-size="12px"
                                stroke="none" fill="#888888" transform="matrix(1,0,0,1,0,6.8)">
                                <tspan dy="4.4">Fév</tspan>
                            </text>
                            <text x="429.62" y="273.9" text-anchor="middle" font-family="sans-serif" font-size="12px"
                                stroke="none" fill="#888888" transform="matrix(1,0,0,1,0,6.8)">
                                <tspan dy="4.4">Jan</tspan>
                            </text>
                            <text x="334.11" y="273.9" text-anchor="middle" font-family="sans-serif" font-size="12px"
                                stroke="none" fill="#888888" transform="matrix(1,0,0,1,0,6.8)">
                                <tspan dy="4.4">Déc</tspan>
                            </text>
                            <text x="238.86" y="273.9" text-anchor="middle" font-family="sans-serif" font-size="12px"
                                stroke="none" fill="#888888" transform="matrix(1,0,0,1,0,6.8)">
                                <tspan dy="4.4">Nov</tspan>
                            </text>
                            <text x="143.61" y="273.9" text-anchor="middle" font-family="sans-serif" font-size="12px"
                                stroke="none" fill="#888888" transform="matrix(1,0,0,1,0,6.8)">
                                <tspan dy="4.4">Oct</tspan>
                            </text>
                            <text x="48.36" y="273.9" text-anchor="middle" font-family="sans-serif" font-size="12px"
                                stroke="none" fill="#888888" transform="matrix(1,0,0,1,0,6.8)">
                                <tspan dy="4.4">Sept</tspan>
                            </text>
                            <!-- Communication Area Chart -->
                            <path fill="#7a68c4" stroke="none"
                                d="M48.36250114440918,221.99999968210855C72.17506527976867,195.7333330578274,119.80019355048766,120.21666651301912,143.61275768584716,116.93333318498398C167.42532182120667,113.64999985694884,215.05045009192565,199.01666638586255,238.86301422728516,195.73333305782742C262.67557836264467,192.4499997297923,310.3007066333637,93.94550832467776,334.11327076872317,90.66666656070285C357.99107480582336,87.37884166860746,405.7466828800238,157.95927931121244,429.624486917124,169.46666643354627C453.4370510524835,180.94261260745844,501.06217932320254,179.31666641765167,524.8747434585621,182.59999974568683C548.6873075939216,185.88333307372199,596.3124358646405,192.44999972979227,620.125,195.73333305782742L620.125,261.3999996185303L48.36250114440918,261.3999996185303Z"
                                fill-opacity="0.5"></path>
                            <path fill="none" stroke="#5840ba"
                                d="M48.36250114440918,221.99999968210855C72.17506527976867,195.7333330578274,119.80019355048766,120.21666651301912,143.61275768584716,116.93333318498398C167.42532182120667,113.64999985694884,215.05045009192565,199.01666638586255,238.86301422728516,195.73333305782742C262.67557836264467,192.4499997297923,310.3007066333637,93.94550832467776,334.11327076872317,90.66666656070285C357.99107480582336,87.37884166860746,405.7466828800238,157.95927931121244,429.624486917124,169.46666643354627C453.4370510524835,180.94261260745844,501.06217932320254,179.31666641765167,524.8747434585621,182.59999974568683C548.6873075939216,185.88333307372199,596.3124358646405,192.44999972979227,620.125,195.73333305782742"
                                stroke-width="3"></path>
                            <!-- Socialisation Area Chart -->
                            <path fill="#fbd1f2" stroke="none"
                                d="M48.36250114440918,195.73333305782742C72.17506527976867,199.01666638586258,119.80019355048766,218.71666635407342,143.61275768584716,208.866666369968C167.42532182120667,199.01666638586255,215.05045009192565,115.2916665209664,238.86301422728516,116.93333318498398C262.67557836264467,118.57499984900156,310.3007066333637,212.16347439018384,334.11327076872317,221.99999968210855C357.99107480582336,231.8634743583947,405.7466828800238,218.7481073024951,429.624486917124,195.73333305782742C453.4370510524835,172.7814407100031,501.06217932320254,34.84999998410542,524.8747434585621,38.133333312140564C548.6873075939216,41.416666640175706,596.3124358646405,176.03333308961655,620.125,221.99999968210855L620.125,261.3999996185303L48.36250114440918,261.3999996185303Z"
                                fill-opacity="0.5"></path>
                            <path fill="none" stroke="#fb84e2"
                                d="M48.36250114440918,195.73333305782742C72.17506527976867,199.01666638586258,119.80019355048766,218.71666635407342,143.61275768584716,208.866666369968C167.42532182120667,199.01666638586255,215.05045009192565,115.2916665209664,238.86301422728516,116.93333318498398C262.67557836264467,118.57499984900156,310.3007066333637,212.16347439018384,334.11327076872317,221.99999968210855C357.99107480582336,231.8634743583947,405.7466828800238,218.7481073024951,429.624486917124,195.73333305782742C453.4370510524835,172.7814407100031,501.06217932320254,34.84999998410542,524.8747434585621,38.133333312140564C548.6873075939216,41.416666640175706,596.3124358646405,176.03333308961655,620.125,221.99999968210855"
                                stroke-width="3"></path>
                        </svg>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>





<!-- Popup pour ajouter un enfant -->
<p-dialog header="Ajouter un enfant" [(visible)]="displayDialog" [modal]="true" [style]="{ width: '40vw' }">
    <div class="dialog-content">
        <div class="field">
            <label for="name">Nom</label>
            <input pInputText id="name" [(ngModel)]="newChild.name" placeholder="Nom" required />
        </div>
        <div class="field">
            <label for="age">Âge</label>
            <input pInputText id="age" type="number" [(ngModel)]="newChild.age" placeholder="Âge" required />
        </div>
        <div class="field">
            <label for="diagnosisDate">Date de diagnostic</label>
            <input pInputText id="diagnosisDate" type="date" [(ngModel)]="newChild.diagnosisDate" />
        </div>
        <div class="field">
            <label for="evaluationScore">Score d'évaluation</label>
            <input pInputText id="evaluationScore" type="number" [(ngModel)]="newChild.evaluationScore"
                placeholder="Score (0-100)" />
        </div>
        <div class="field">
            <label for="objectives">Objectifs (séparés par des virgules)</label>
            <input pInputText id="objectives" [(ngModel)]="newChild.objectives"
                (ngModelChange)="newChild.objectives = $event.split(',')" placeholder="Ex: Communication, Autonomie" />
        </div>
        <div class="field">
            <label for="progress">Progrès</label>
            <input pInputText id="progress" [(ngModel)]="newChild.progress" placeholder="Ex: En progrès" />
        </div>
        <div class="field">
            <label for="strategies">Stratégies (séparées par des virgules)</label>
            <input pInputText id="strategies" [(ngModel)]="newChild.recommendedStrategies"
                (ngModelChange)="newChild.recommendedStrategies = $event.split(',')"
                placeholder="Ex: Renforcement positif" />
        </div>
        <div class="field">
            <label for="imageUrl">URL de l'image</label>
            <input pInputText id="imageUrl" [(ngModel)]="newChild.imageUrl" placeholder="URL de l'image (optionnel)" />
        </div>
    </div>
    <ng-template pTemplate="footer">
        <p-button label="Annuler" styleClass="p-button-text" (click)="cancel()"></p-button>
        <p-button label="Ajouter" styleClass="p-button-primary" (click)="addChild()"></p-button>
    </ng-template>
</p-dialog>



<p-dialog header="Modifier le profil" [(visible)]="displayEditDialog" [modal]="true" [style]="{width: '50vw'}"
    [draggable]="false" [resizable]="false">
    <div class="p-fluid">
        <div class="p-field">
            <label for="name">Nom</label>
            <input pInputText id="name" [(ngModel)]="selectedChild.name" type="text" />
        </div>
        <div class="p-field">
            <label for="age">Âge</label>
            <input pInputText id="age" [(ngModel)]="selectedChild.age" type="number" />
        </div>
        <div class="p-field">
            <label for="diagnosisDate">Date de diagnostic</label>
            <input pInputText id="diagnosisDate" [(ngModel)]="selectedChild.diagnosisDate" type="date" />
        </div>
        <div class="p-field">
            <label for="evaluationScore">Score d'évaluation</label>
            <input pInputText id="evaluationScore" [(ngModel)]="selectedChild.evaluationScore" type="number" />
        </div>
        <div class="p-field">
            <label for="objectives">Objectifs (séparés par des virgules)</label>
            <input pInputText id="objectives" [(ngModel)]="selectedChild.objectives"
                (ngModelChange)="selectedChild.objectives = $event.split(',')" type="text" />
        </div>
        <div class="p-field">
            <label for="progress">Progrès</label>
            <input pInputText id="progress" [(ngModel)]="selectedChild.progress" type="text" />
        </div>
        <div class="p-field">
            <label for="recommendedStrategies">Stratégies recommandées (séparées par des virgules)</label>
            <input pInputText id="recommendedStrategies" [(ngModel)]="selectedChild.recommendedStrategies"
                (ngModelChange)="selectedChild.recommendedStrategies = $event.split(',')" type="text" />
        </div>
    </div>
    <p-footer>
        <button pButton type="button" label="Annuler" class="p-button-secondary" (click)="cancelEdit()"></button>
        <button pButton type="button" label="Enregistrer" class="p-button-primary" (click)="saveChild()"></button>
    </p-footer>
</p-dialog>







